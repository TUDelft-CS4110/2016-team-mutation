<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../.resources/report.gif" type="image/gif"/><title>CrontabParser.java</title><link rel="stylesheet" href="../../../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../.sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">jenkins-core (22-mrt-2016 21:51:03)</a> &gt; <a href="../../index.html" class="el_group">jenkins-core</a> &gt; <a href="../index.html" class="el_bundle">target/generated-sources/antlr</a> &gt; <a href="index.source.html" class="el_package">hudson.scheduler</a> &gt; <span class="el_source">CrontabParser.java</span></div><h1>CrontabParser.java</h1><pre class="source lang-java linenums">// $ANTLR 2.7.6 (2005-12-22): &quot;crontab.g&quot; -&gt; &quot;CrontabParser.java&quot;$

  package hudson.scheduler;

import antlr.TokenBuffer;
import antlr.TokenStreamException;
import antlr.TokenStreamIOException;
import antlr.ANTLRException;
import antlr.LLkParser;
import antlr.Token;
import antlr.TokenStream;
import antlr.RecognitionException;
import antlr.NoViableAltException;
import antlr.MismatchedTokenException;
import antlr.SemanticException;
import antlr.ParserSharedInputState;
import antlr.collections.impl.BitSet;

public class CrontabParser extends BaseParser       implements CrontabParserTokenTypes
 {

protected CrontabParser(TokenBuffer tokenBuf, int k) {
<span class="nc" id="L23">  super(tokenBuf,k);</span>
<span class="nc" id="L24">  tokenNames = _tokenNames;</span>
<span class="nc" id="L25">}</span>

public CrontabParser(TokenBuffer tokenBuf) {
<span class="nc" id="L28">  this(tokenBuf,1);</span>
<span class="nc" id="L29">}</span>

protected CrontabParser(TokenStream lexer, int k) {
<span class="fc" id="L32">  super(lexer,k);</span>
<span class="fc" id="L33">  tokenNames = _tokenNames;</span>
<span class="fc" id="L34">}</span>

public CrontabParser(TokenStream lexer) {
<span class="fc" id="L37">  this(lexer,1);</span>
<span class="fc" id="L38">}</span>

public CrontabParser(ParserSharedInputState state) {
<span class="nc" id="L41">  super(state,1);</span>
<span class="nc" id="L42">  tokenNames = _tokenNames;</span>
<span class="nc" id="L43">}</span>

	public final void startRule(
		CronTab table
	) throws RecognitionException, TokenStreamException, ANTLRException {
		
		
		long m,h,d,mnth,dow;
		
		
<span class="pc bpc" id="L53" title="1 of 3 branches missed.">		switch ( LA(1)) {</span>
		case 16:
		case LITERAL_H:
		case TOKEN:
		{
<span class="fc" id="L58">			m=expr(0);</span>
<span class="fc" id="L59">			match(WS);</span>
<span class="fc" id="L60">			h=expr(1);</span>
<span class="fc" id="L61">			match(WS);</span>
<span class="fc" id="L62">			d=expr(2);</span>
<span class="fc" id="L63">			match(WS);</span>
<span class="fc" id="L64">			mnth=expr(3);</span>
<span class="fc" id="L65">			match(WS);</span>
<span class="fc" id="L66">			dow=expr(4);</span>
<span class="fc" id="L67">			match(Token.EOF_TYPE);</span>
<span class="pc bpc" id="L68" title="1 of 2 branches missed.">			if ( inputState.guessing==0 ) {</span>
				
<span class="fc" id="L70">				table.bits[0]=m;</span>
<span class="fc" id="L71">				table.bits[1]=h;</span>
<span class="fc" id="L72">				table.bits[2]=d;</span>
<span class="fc" id="L73">				table.bits[3]=mnth;</span>
<span class="fc" id="L74">				table.dayOfWeek=(int)dow;</span>
				
			}
<span class="fc" id="L77">			break;</span>
		}
		case AT:
		{
			{
<span class="fc" id="L82">			match(AT);</span>
			{
<span class="pc bpc" id="L84" title="1 of 8 branches missed.">			switch ( LA(1)) {</span>
			case LITERAL_yearly:
			{
<span class="fc" id="L87">				match(LITERAL_yearly);</span>
<span class="pc bpc" id="L88" title="1 of 2 branches missed.">				if ( inputState.guessing==0 ) {</span>
					
<span class="fc" id="L90">					table.set(&quot;H H H H *&quot;,getHashForTokens());</span>
					
				}
<span class="fc" id="L93">				break;</span>
			}
			case LITERAL_annually:
			{
<span class="fc" id="L97">				match(LITERAL_annually);</span>
<span class="pc bpc" id="L98" title="1 of 2 branches missed.">				if ( inputState.guessing==0 ) {</span>
					
<span class="fc" id="L100">					table.set(&quot;H H H H *&quot;,getHashForTokens());</span>
					
				}
<span class="fc" id="L103">				break;</span>
			}
			case LITERAL_monthly:
			{
<span class="fc" id="L107">				match(LITERAL_monthly);</span>
<span class="pc bpc" id="L108" title="1 of 2 branches missed.">				if ( inputState.guessing==0 ) {</span>
					
<span class="fc" id="L110">					table.set(&quot;H H H * *&quot;,getHashForTokens());</span>
					
				}
<span class="fc" id="L113">				break;</span>
			}
			case LITERAL_weekly:
			{
<span class="fc" id="L117">				match(LITERAL_weekly);</span>
<span class="pc bpc" id="L118" title="1 of 2 branches missed.">				if ( inputState.guessing==0 ) {</span>
					
<span class="fc" id="L120">					table.set(&quot;H H * * H&quot;,getHashForTokens());</span>
					
				}
<span class="fc" id="L123">				break;</span>
			}
			case LITERAL_daily:
			{
<span class="fc" id="L127">				match(LITERAL_daily);</span>
<span class="pc bpc" id="L128" title="1 of 2 branches missed.">				if ( inputState.guessing==0 ) {</span>
					
<span class="fc" id="L130">					table.set(&quot;H H * * *&quot;,getHashForTokens());</span>
					
				}
<span class="fc" id="L133">				break;</span>
			}
			case LITERAL_midnight:
			{
<span class="fc" id="L137">				match(LITERAL_midnight);</span>
<span class="pc bpc" id="L138" title="1 of 2 branches missed.">				if ( inputState.guessing==0 ) {</span>
					
<span class="fc" id="L140">					table.set(&quot;H H(0-2) * * *&quot;,getHashForTokens());</span>
					
				}
<span class="fc" id="L143">				break;</span>
			}
			case LITERAL_hourly:
			{
<span class="fc" id="L147">				match(LITERAL_hourly);</span>
<span class="pc bpc" id="L148" title="1 of 2 branches missed.">				if ( inputState.guessing==0 ) {</span>
					
<span class="fc" id="L150">					table.set(&quot;H * * * *&quot;,getHashForTokens());</span>
					
				}
<span class="fc" id="L153">				break;</span>
			}
			default:
			{
<span class="nc" id="L157">				throw new NoViableAltException(LT(1), getFilename());</span>
			}
			}
			}
			}
			break;
		}
		default:
		{
<span class="nc" id="L166">			throw new NoViableAltException(LT(1), getFilename());</span>
		}
		}
<span class="fc" id="L169">	}</span>
	
	public final long  expr(
		int field
	) throws RecognitionException, TokenStreamException, ANTLRException {
<span class="fc" id="L174">		long bits=0;</span>
		
		
<span class="fc" id="L177">		long lhs,rhs=0;</span>
		
		
<span class="fc" id="L180">		lhs=term(field);</span>
		{
<span class="pc bpc" id="L182" title="1 of 3 branches missed.">		switch ( LA(1)) {</span>
		case 13:
		{
<span class="fc" id="L185">			match(13);</span>
<span class="fc" id="L186">			rhs=expr(field);</span>
<span class="fc" id="L187">			break;</span>
		}
		case EOF:
		case WS:
		{
<span class="fc" id="L192">			break;</span>
		}
		default:
		{
<span class="nc" id="L196">			throw new NoViableAltException(LT(1), getFilename());</span>
		}
		}
		}
<span class="pc bpc" id="L200" title="1 of 2 branches missed.">		if ( inputState.guessing==0 ) {</span>
			
<span class="fc" id="L202">			bits = lhs|rhs;</span>
			
		}
<span class="fc" id="L205">		return bits;</span>
	}
	
	public final long  term(
		int field
	) throws RecognitionException, TokenStreamException, ANTLRException {
<span class="fc" id="L211">		long bits=0;</span>
		
		
<span class="fc" id="L214">		int d=NO_STEP,s,e,t;</span>
		
		
<span class="fc" id="L217">		boolean synPredMatched8 = false;</span>
<span class="fc bfc" id="L218" title="All 2 branches covered.">		if (((LA(1)==TOKEN))) {</span>
<span class="fc" id="L219">			int _m8 = mark();</span>
<span class="fc" id="L220">			synPredMatched8 = true;</span>
<span class="fc" id="L221">			inputState.guessing++;</span>
			try {
				{
<span class="fc" id="L224">				token();</span>
<span class="fc" id="L225">				match(14);</span>
				}
<span class="fc" id="L227">			}</span>
<span class="fc" id="L228">			catch (RecognitionException pe) {</span>
<span class="fc" id="L229">				synPredMatched8 = false;</span>
			}
<span class="fc" id="L231">			rewind(_m8);</span>
<span class="fc" id="L232">inputState.guessing--;</span>
		}
<span class="fc bfc" id="L234" title="All 2 branches covered.">		if ( synPredMatched8 ) {</span>
<span class="fc" id="L235">			s=token();</span>
<span class="fc" id="L236">			match(14);</span>
<span class="fc" id="L237">			e=token();</span>
			{
<span class="pc bpc" id="L239" title="1 of 3 branches missed.">			switch ( LA(1)) {</span>
			case 15:
			{
<span class="fc" id="L242">				match(15);</span>
<span class="fc" id="L243">				d=token();</span>
<span class="fc" id="L244">				break;</span>
			}
			case EOF:
			case WS:
			case 13:
			{
<span class="fc" id="L250">				break;</span>
			}
			default:
			{
<span class="nc" id="L254">				throw new NoViableAltException(LT(1), getFilename());</span>
			}
			}
			}
<span class="pc bpc" id="L258" title="1 of 2 branches missed.">			if ( inputState.guessing==0 ) {</span>
				
<span class="fc" id="L260">				bits = doRange(s,e,d,field);</span>
				
			}
<span class="fc" id="L263">		}</span>
<span class="fc bfc" id="L264" title="All 2 branches covered.">		else if ((LA(1)==TOKEN)) {</span>
<span class="fc" id="L265">			t=token();</span>
<span class="pc bpc" id="L266" title="1 of 2 branches missed.">			if ( inputState.guessing==0 ) {</span>
				
<span class="fc" id="L268">				rangeCheck(t,field);</span>
<span class="fc" id="L269">				bits = 1L&lt;&lt;t;</span>
				
			}
<span class="fc" id="L272">		}</span>
<span class="fc bfc" id="L273" title="All 2 branches covered.">		else if ((LA(1)==16)) {</span>
<span class="fc" id="L274">			match(16);</span>
			{
<span class="pc bpc" id="L276" title="1 of 3 branches missed.">			switch ( LA(1)) {</span>
			case 15:
			{
<span class="fc" id="L279">				match(15);</span>
<span class="fc" id="L280">				d=token();</span>
<span class="fc" id="L281">				break;</span>
			}
			case EOF:
			case WS:
			case 13:
			{
<span class="fc" id="L287">				break;</span>
			}
			default:
			{
<span class="nc" id="L291">				throw new NoViableAltException(LT(1), getFilename());</span>
			}
			}
			}
<span class="pc bpc" id="L295" title="1 of 2 branches missed.">			if ( inputState.guessing==0 ) {</span>
				
<span class="fc" id="L297">				bits = doRange(d,field);</span>
				
			}
<span class="fc" id="L300">		}</span>
		else {
<span class="fc" id="L302">			boolean synPredMatched12 = false;</span>
<span class="pc bpc" id="L303" title="1 of 2 branches missed.">			if (((LA(1)==LITERAL_H))) {</span>
<span class="fc" id="L304">				int _m12 = mark();</span>
<span class="fc" id="L305">				synPredMatched12 = true;</span>
<span class="fc" id="L306">				inputState.guessing++;</span>
				try {
					{
<span class="fc" id="L309">					match(LITERAL_H);</span>
<span class="fc" id="L310">					match(18);</span>
					}
<span class="fc" id="L312">				}</span>
<span class="fc" id="L313">				catch (RecognitionException pe) {</span>
<span class="fc" id="L314">					synPredMatched12 = false;</span>
				}
<span class="fc" id="L316">				rewind(_m12);</span>
<span class="fc" id="L317">inputState.guessing--;</span>
			}
<span class="fc bfc" id="L319" title="All 2 branches covered.">			if ( synPredMatched12 ) {</span>
<span class="fc" id="L320">				match(LITERAL_H);</span>
<span class="fc" id="L321">				match(18);</span>
<span class="fc" id="L322">				s=token();</span>
<span class="fc" id="L323">				match(14);</span>
<span class="fc" id="L324">				e=token();</span>
<span class="fc" id="L325">				match(19);</span>
				{
<span class="pc bpc" id="L327" title="1 of 3 branches missed.">				switch ( LA(1)) {</span>
				case 15:
				{
<span class="fc" id="L330">					match(15);</span>
<span class="fc" id="L331">					d=token();</span>
<span class="fc" id="L332">					break;</span>
				}
				case EOF:
				case WS:
				case 13:
				{
<span class="fc" id="L338">					break;</span>
				}
				default:
				{
<span class="nc" id="L342">					throw new NoViableAltException(LT(1), getFilename());</span>
				}
				}
				}
<span class="pc bpc" id="L346" title="1 of 2 branches missed.">				if ( inputState.guessing==0 ) {</span>
					
<span class="fc" id="L348">					bits = doHash(s,e,d,field);</span>
					
				}
<span class="fc" id="L351">			}</span>
<span class="pc bpc" id="L352" title="1 of 2 branches missed.">			else if ((LA(1)==LITERAL_H)) {</span>
<span class="fc" id="L353">				match(LITERAL_H);</span>
				{
<span class="pc bpc" id="L355" title="1 of 3 branches missed.">				switch ( LA(1)) {</span>
				case 15:
				{
<span class="fc" id="L358">					match(15);</span>
<span class="fc" id="L359">					d=token();</span>
<span class="fc" id="L360">					break;</span>
				}
				case EOF:
				case WS:
				case 13:
				{
<span class="fc" id="L366">					break;</span>
				}
				default:
				{
<span class="nc" id="L370">					throw new NoViableAltException(LT(1), getFilename());</span>
				}
				}
				}
<span class="pc bpc" id="L374" title="1 of 2 branches missed.">				if ( inputState.guessing==0 ) {</span>
					
<span class="fc" id="L376">					bits = doHash(d,field);</span>
					
				}
<span class="fc" id="L379">			}</span>
			else {
<span class="nc" id="L381">				throw new NoViableAltException(LT(1), getFilename());</span>
			}
			}
<span class="fc" id="L384">			return bits;</span>
		}
		
	public final int  token() throws RecognitionException, TokenStreamException {
<span class="fc" id="L388">		int value=0;</span>
		
<span class="fc" id="L390">		Token  t = null;</span>
		
<span class="fc" id="L392">		t = LT(1);</span>
<span class="fc" id="L393">		match(TOKEN);</span>
<span class="fc bfc" id="L394" title="All 2 branches covered.">		if ( inputState.guessing==0 ) {</span>
			
<span class="fc" id="L396">			value = Integer.parseInt(t.getText());</span>
			
		}
<span class="fc" id="L399">		return value;</span>
	}
	
	
<span class="fc" id="L403">	public static final String[] _tokenNames = {</span>
<span class="fc" id="L404">		&quot;&lt;0&gt;&quot;,</span>
<span class="fc" id="L405">		&quot;EOF&quot;,</span>
<span class="fc" id="L406">		&quot;&lt;2&gt;&quot;,</span>
<span class="fc" id="L407">		&quot;NULL_TREE_LOOKAHEAD&quot;,</span>
<span class="fc" id="L408">		&quot;space&quot;,</span>
<span class="fc" id="L409">		&quot;AT&quot;,</span>
<span class="fc" id="L410">		&quot;\&quot;yearly\&quot;&quot;,</span>
<span class="fc" id="L411">		&quot;\&quot;annually\&quot;&quot;,</span>
<span class="fc" id="L412">		&quot;\&quot;monthly\&quot;&quot;,</span>
<span class="fc" id="L413">		&quot;\&quot;weekly\&quot;&quot;,</span>
<span class="fc" id="L414">		&quot;\&quot;daily\&quot;&quot;,</span>
<span class="fc" id="L415">		&quot;\&quot;midnight\&quot;&quot;,</span>
<span class="fc" id="L416">		&quot;\&quot;hourly\&quot;&quot;,</span>
<span class="fc" id="L417">		&quot;\&quot;,\&quot;&quot;,</span>
<span class="fc" id="L418">		&quot;\&quot;-\&quot;&quot;,</span>
<span class="fc" id="L419">		&quot;\&quot;/\&quot;&quot;,</span>
<span class="fc" id="L420">		&quot;\&quot;*\&quot;&quot;,</span>
<span class="fc" id="L421">		&quot;\&quot;H\&quot;&quot;,</span>
<span class="fc" id="L422">		&quot;\&quot;(\&quot;&quot;,</span>
<span class="fc" id="L423">		&quot;\&quot;)\&quot;&quot;,</span>
<span class="fc" id="L424">		&quot;a number&quot;,</span>
<span class="fc" id="L425">		&quot;MINUS&quot;,</span>
<span class="fc" id="L426">		&quot;STAR&quot;,</span>
<span class="fc" id="L427">		&quot;DIV&quot;,</span>
<span class="fc" id="L428">		&quot;OR&quot;,</span>
<span class="fc" id="L429">		&quot;H&quot;,</span>
<span class="fc" id="L430">		&quot;LPAREN&quot;,</span>
<span class="fc" id="L431">		&quot;RPAREN&quot;,</span>
<span class="fc" id="L432">		&quot;YEARLY&quot;,</span>
<span class="fc" id="L433">		&quot;ANNUALLY&quot;,</span>
<span class="fc" id="L434">		&quot;MONTHLY&quot;,</span>
<span class="fc" id="L435">		&quot;WEEKLY&quot;,</span>
<span class="fc" id="L436">		&quot;DAILY&quot;,</span>
<span class="fc" id="L437">		&quot;MIDNIGHT&quot;,</span>
<span class="fc" id="L438">		&quot;HOURLY&quot;</span>
<span class="fc" id="L439">	};</span>
	
	
	}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.6.201602180812</span>jenkins-core (22-mrt-2016 21:51:03)</div></body></html>