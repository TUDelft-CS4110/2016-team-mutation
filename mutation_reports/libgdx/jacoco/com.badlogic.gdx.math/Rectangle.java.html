<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>Rectangle.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">libGDX Core</a> &gt; <a href="index.html" class="el_package">com.badlogic.gdx.math</a> &gt; <span class="el_source">Rectangle.java</span></div><h1>Rectangle.java</h1><pre class="source lang-java linenums">/*******************************************************************************
 * Copyright 2011 See AUTHORS file.
 * 
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in compliance with the
 * License. You may obtain a copy of the License at
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an &quot;AS IS&quot;
 * BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 ******************************************************************************/

package com.badlogic.gdx.math;

import java.io.Serializable;

import com.badlogic.gdx.utils.GdxRuntimeException;
import com.badlogic.gdx.utils.NumberUtils;
import com.badlogic.gdx.utils.Scaling;

/** Encapsulates a 2D rectangle defined by its corner point in the bottom left and its extents in x (width) and y (height).
 * @author badlogicgames@gmail.com */
public class Rectangle implements Serializable, Shape2D {
	/** Static temporary rectangle. Use with care! Use only when sure other code will not also use this. */
<span class="fc" id="L26">	static public final Rectangle tmp = new Rectangle();</span>

	/** Static temporary rectangle. Use with care! Use only when sure other code will not also use this. */
<span class="fc" id="L29">	static public final Rectangle tmp2 = new Rectangle();</span>

	private static final long serialVersionUID = 5733252015138115702L;
	public float x, y;
	public float width, height;

	/** Constructs a new rectangle with all values set to zero */
<span class="fc" id="L36">	public Rectangle () {</span>

<span class="fc" id="L38">	}</span>

	/** Constructs a new rectangle with the given corner point in the bottom left and dimensions.
	 * @param x The corner point x-coordinate
	 * @param y The corner point y-coordinate
	 * @param width The width
	 * @param height The height */
<span class="fc" id="L45">	public Rectangle (float x, float y, float width, float height) {</span>
<span class="fc" id="L46">		this.x = x;</span>
<span class="fc" id="L47">		this.y = y;</span>
<span class="fc" id="L48">		this.width = width;</span>
<span class="fc" id="L49">		this.height = height;</span>
<span class="fc" id="L50">	}</span>

	/** Constructs a rectangle based on the given rectangle
	 * @param rect The rectangle */
<span class="nc" id="L54">	public Rectangle (Rectangle rect) {</span>
<span class="nc" id="L55">		x = rect.x;</span>
<span class="nc" id="L56">		y = rect.y;</span>
<span class="nc" id="L57">		width = rect.width;</span>
<span class="nc" id="L58">		height = rect.height;</span>
<span class="nc" id="L59">	}</span>

	/** @param x bottom-left x coordinate
	 * @param y bottom-left y coordinate
	 * @param width width
	 * @param height height
	 * @return this rectangle for chaining */
	public Rectangle set (float x, float y, float width, float height) {
<span class="fc" id="L67">		this.x = x;</span>
<span class="fc" id="L68">		this.y = y;</span>
<span class="fc" id="L69">		this.width = width;</span>
<span class="fc" id="L70">		this.height = height;</span>

<span class="fc" id="L72">		return this;</span>
	}

	/** @return the x-coordinate of the bottom left corner */
	public float getX () {
<span class="nc" id="L77">		return x;</span>
	}

	/** Sets the x-coordinate of the bottom left corner
	 * @param x The x-coordinate
	 * @return this rectangle for chaining */
	public Rectangle setX (float x) {
<span class="nc" id="L84">		this.x = x;</span>

<span class="nc" id="L86">		return this;</span>
	}

	/** @return the y-coordinate of the bottom left corner */
	public float getY () {
<span class="nc" id="L91">		return y;</span>
	}

	/** Sets the y-coordinate of the bottom left corner
	 * @param y The y-coordinate
	 * @return this rectangle for chaining */
	public Rectangle setY (float y) {
<span class="nc" id="L98">		this.y = y;</span>

<span class="nc" id="L100">		return this;</span>
	}

	/** @return the width */
	public float getWidth () {
<span class="nc" id="L105">		return width;</span>
	}

	/** Sets the width of this rectangle
	 * @param width The width
	 * @return this rectangle for chaining */
	public Rectangle setWidth (float width) {
<span class="nc" id="L112">		this.width = width;</span>

<span class="nc" id="L114">		return this;</span>
	}

	/** @return the height */
	public float getHeight () {
<span class="nc" id="L119">		return height;</span>
	}

	/** Sets the height of this rectangle
	 * @param height The height
	 * @return this rectangle for chaining */
	public Rectangle setHeight (float height) {
<span class="nc" id="L126">		this.height = height;</span>

<span class="nc" id="L128">		return this;</span>
	}

	/** return the Vector2 with coordinates of this rectangle
	 * @param position The Vector2 */
	public Vector2 getPosition (Vector2 position) {
<span class="nc" id="L134">		return position.set(x, y);</span>
	}

	/** Sets the x and y-coordinates of the bottom left corner from vector
	 * @param position The position vector
	 * @return this rectangle for chaining */
	public Rectangle setPosition (Vector2 position) {
<span class="nc" id="L141">		this.x = position.x;</span>
<span class="nc" id="L142">		this.y = position.y;</span>

<span class="nc" id="L144">		return this;</span>
	}

	/** Sets the x and y-coordinates of the bottom left corner
	 * @param x The x-coordinate
	 * @param y The y-coordinate
	 * @return this rectangle for chaining */
	public Rectangle setPosition (float x, float y) {
<span class="nc" id="L152">		this.x = x;</span>
<span class="nc" id="L153">		this.y = y;</span>

<span class="nc" id="L155">		return this;</span>
	}

	/** Sets the width and height of this rectangle
	 * @param width The width
	 * @param height The height
	 * @return this rectangle for chaining */
	public Rectangle setSize (float width, float height) {
<span class="nc" id="L163">		this.width = width;</span>
<span class="nc" id="L164">		this.height = height;</span>

<span class="nc" id="L166">		return this;</span>
	}

	/** Sets the squared size of this rectangle
	 * @param sizeXY The size
	 * @return this rectangle for chaining */
	public Rectangle setSize (float sizeXY) {
<span class="nc" id="L173">		this.width = sizeXY;</span>
<span class="nc" id="L174">		this.height = sizeXY;</span>

<span class="nc" id="L176">		return this;</span>
	}

	/** @return the Vector2 with size of this rectangle
	 * @param size The Vector2 */
	public Vector2 getSize (Vector2 size) {
<span class="nc" id="L182">		return size.set(width, height);</span>
	}

	/** @param x point x coordinate
	 * @param y point y coordinate
	 * @return whether the point is contained in the rectangle */
	public boolean contains (float x, float y) {
<span class="pc bpc" id="L189" title="4 of 8 branches missed.">		return this.x &lt;= x &amp;&amp; this.x + this.width &gt;= x &amp;&amp; this.y &lt;= y &amp;&amp; this.y + this.height &gt;= y;</span>
	}

	/** @param point The coordinates vector
	 * @return whether the point is contained in the rectangle */
	public boolean contains (Vector2 point) {
<span class="nc" id="L195">		return contains(point.x, point.y);</span>
	}

	/** @param rectangle the other {@link Rectangle}.
	 * @return whether the other rectangle is contained in this rectangle. */
	public boolean contains (Rectangle rectangle) {
<span class="nc" id="L201">		float xmin = rectangle.x;</span>
<span class="nc" id="L202">		float xmax = xmin + rectangle.width;</span>

<span class="nc" id="L204">		float ymin = rectangle.y;</span>
<span class="nc" id="L205">		float ymax = ymin + rectangle.height;</span>

<span class="nc bnc" id="L207" title="All 16 branches missed.">		return ((xmin &gt; x &amp;&amp; xmin &lt; x + width) &amp;&amp; (xmax &gt; x &amp;&amp; xmax &lt; x + width))</span>
			&amp;&amp; ((ymin &gt; y &amp;&amp; ymin &lt; y + height) &amp;&amp; (ymax &gt; y &amp;&amp; ymax &lt; y + height));
	}

	/** @param r the other {@link Rectangle}
	 * @return whether this rectangle overlaps the other rectangle. */
	public boolean overlaps (Rectangle r) {
<span class="pc bpc" id="L214" title="3 of 8 branches missed.">		return x &lt; r.x + r.width &amp;&amp; x + width &gt; r.x &amp;&amp; y &lt; r.y + r.height &amp;&amp; y + height &gt; r.y;</span>
	}

	/** Sets the values of the given rectangle to this rectangle.
	 * @param rect the other rectangle
	 * @return this rectangle for chaining */
	public Rectangle set (Rectangle rect) {
<span class="nc" id="L221">		this.x = rect.x;</span>
<span class="nc" id="L222">		this.y = rect.y;</span>
<span class="nc" id="L223">		this.width = rect.width;</span>
<span class="nc" id="L224">		this.height = rect.height;</span>

<span class="nc" id="L226">		return this;</span>
	}

	/** Merges this rectangle with the other rectangle. The rectangle should not have negative width or negative height.
	 * @param rect the other rectangle
	 * @return this rectangle for chaining */
	public Rectangle merge (Rectangle rect) {
<span class="nc" id="L233">		float minX = Math.min(x, rect.x);</span>
<span class="nc" id="L234">		float maxX = Math.max(x + width, rect.x + rect.width);</span>
<span class="nc" id="L235">		x = minX;</span>
<span class="nc" id="L236">		width = maxX - minX;</span>

<span class="nc" id="L238">		float minY = Math.min(y, rect.y);</span>
<span class="nc" id="L239">		float maxY = Math.max(y + height, rect.y + rect.height);</span>
<span class="nc" id="L240">		y = minY;</span>
<span class="nc" id="L241">		height = maxY - minY;</span>

<span class="nc" id="L243">		return this;</span>
	}

	/** Merges this rectangle with a point. The rectangle should not have negative width or negative height.
	 * @param x the x coordinate of the point
	 * @param y the y coordinate of the point
	 * @return this rectangle for chaining */
	public Rectangle merge (float x, float y) {
<span class="nc" id="L251">		float minX = Math.min(this.x, x);</span>
<span class="nc" id="L252">		float maxX = Math.max(this.x + width, x);</span>
<span class="nc" id="L253">		this.x = minX;</span>
<span class="nc" id="L254">		this.width = maxX - minX;</span>

<span class="nc" id="L256">		float minY = Math.min(this.y, y);</span>
<span class="nc" id="L257">		float maxY = Math.max(this.y + height, y);</span>
<span class="nc" id="L258">		this.y = minY;</span>
<span class="nc" id="L259">		this.height = maxY - minY;</span>

<span class="nc" id="L261">		return this;</span>
	}

	/** Merges this rectangle with a point. The rectangle should not have negative width or negative height.
	 * @param vec the vector describing the point
	 * @return this rectangle for chaining */
	public Rectangle merge (Vector2 vec) {
<span class="nc" id="L268">		return merge(vec.x, vec.y);</span>
	}

	/** Merges this rectangle with a list of points. The rectangle should not have negative width or negative height.
	 * @param vecs the vectors describing the points
	 * @return this rectangle for chaining */
	public Rectangle merge (Vector2[] vecs) {
<span class="nc" id="L275">		float minX = x;</span>
<span class="nc" id="L276">		float maxX = x + width;</span>
<span class="nc" id="L277">		float minY = y;</span>
<span class="nc" id="L278">		float maxY = y + height;</span>
<span class="nc bnc" id="L279" title="All 2 branches missed.">		for (int i = 0; i &lt; vecs.length; ++i) {</span>
<span class="nc" id="L280">			Vector2 v = vecs[i];</span>
<span class="nc" id="L281">			minX = Math.min(minX, v.x);</span>
<span class="nc" id="L282">			maxX = Math.max(maxX, v.x);</span>
<span class="nc" id="L283">			minY = Math.min(minY, v.y);</span>
<span class="nc" id="L284">			maxY = Math.max(maxY, v.y);</span>
		}
<span class="nc" id="L286">		x = minX;</span>
<span class="nc" id="L287">		width = maxX - minX;</span>
<span class="nc" id="L288">		y = minY;</span>
<span class="nc" id="L289">		height = maxY - minY;</span>
<span class="nc" id="L290">		return this;</span>
	}

	/** Calculates the aspect ratio ( width / height ) of this rectangle
	 * @return the aspect ratio of this rectangle. Returns Float.NaN if height is 0 to avoid ArithmeticException */
	public float getAspectRatio () {
<span class="nc bnc" id="L296" title="All 2 branches missed.">		return (height == 0) ? Float.NaN : width / height;</span>
	}

	/** Calculates the center of the rectangle. Results are located in the given Vector2
	 * @param vector the Vector2 to use
	 * @return the given vector with results stored inside */
	public Vector2 getCenter (Vector2 vector) {
<span class="nc" id="L303">		vector.x = x + width / 2;</span>
<span class="nc" id="L304">		vector.y = y + height / 2;</span>
<span class="nc" id="L305">		return vector;</span>
	}

	/** Moves this rectangle so that its center point is located at a given position
	 * @param x the position's x
	 * @param y the position's y
	 * @return this for chaining */
	public Rectangle setCenter (float x, float y) {
<span class="nc" id="L313">		setPosition(x - width / 2, y - height / 2);</span>
<span class="nc" id="L314">		return this;</span>
	}

	/** Moves this rectangle so that its center point is located at a given position
	 * @param position the position
	 * @return this for chaining */
	public Rectangle setCenter (Vector2 position) {
<span class="nc" id="L321">		setPosition(position.x - width / 2, position.y - height / 2);</span>
<span class="nc" id="L322">		return this;</span>
	}

	/** Fits this rectangle around another rectangle while maintaining aspect ratio. This scales and centers the rectangle to the
	 * other rectangle (e.g. Having a camera translate and scale to show a given area)
	 * @param rect the other rectangle to fit this rectangle around
	 * @return this rectangle for chaining
	 * @see Scaling */
	public Rectangle fitOutside (Rectangle rect) {
<span class="nc" id="L331">		float ratio = getAspectRatio();</span>

<span class="nc bnc" id="L333" title="All 2 branches missed.">		if (ratio &gt; rect.getAspectRatio()) {</span>
			// Wider than tall
<span class="nc" id="L335">			setSize(rect.height * ratio, rect.height);</span>
		} else {
			// Taller than wide
<span class="nc" id="L338">			setSize(rect.width, rect.width / ratio);</span>
		}

<span class="nc" id="L341">		setPosition((rect.x + rect.width / 2) - width / 2, (rect.y + rect.height / 2) - height / 2);</span>
<span class="nc" id="L342">		return this;</span>
	}

	/** Fits this rectangle into another rectangle while maintaining aspect ratio. This scales and centers the rectangle to the
	 * other rectangle (e.g. Scaling a texture within a arbitrary cell without squeezing)
	 * @param rect the other rectangle to fit this rectangle inside
	 * @return this rectangle for chaining
	 * @see Scaling */
	public Rectangle fitInside (Rectangle rect) {
<span class="nc" id="L351">		float ratio = getAspectRatio();</span>

<span class="nc bnc" id="L353" title="All 2 branches missed.">		if (ratio &lt; rect.getAspectRatio()) {</span>
			// Taller than wide
<span class="nc" id="L355">			setSize(rect.height * ratio, rect.height);</span>
		} else {
			// Wider than tall
<span class="nc" id="L358">			setSize(rect.width, rect.width / ratio);</span>
		}

<span class="nc" id="L361">		setPosition((rect.x + rect.width / 2) - width / 2, (rect.y + rect.height / 2) - height / 2);</span>
<span class="nc" id="L362">		return this;</span>
	}

	/** Converts this {@code Rectangle} to a string in the format {@code [x,y,width,height]}.
	 * @return a string representation of this object. */
	public String toString () {
<span class="fc" id="L368">		return &quot;[&quot; + x + &quot;,&quot; + y + &quot;,&quot; + width + &quot;,&quot; + height + &quot;]&quot;;</span>
	}

	/** Sets this {@code Rectangle} to the value represented by the specified string according to the format of {@link #toString()}
	 * .
	 * @param v the string.
	 * @return this rectangle for chaining */
	public Rectangle fromString (String v) {
<span class="fc" id="L376">		int s0 = v.indexOf(',', 1);</span>
<span class="fc" id="L377">		int s1 = v.indexOf(',', s0 + 1);</span>
<span class="fc" id="L378">		int s2 = v.indexOf(',', s1 + 1);</span>
<span class="pc bpc" id="L379" title="5 of 10 branches missed.">		if (s0 != -1 &amp;&amp; s1 != -1 &amp;&amp; s2 != -1 &amp;&amp; v.charAt(0) == '[' &amp;&amp; v.charAt(v.length() - 1) == ']') {</span>
			try {
<span class="fc" id="L381">				float x = Float.parseFloat(v.substring(1, s0));</span>
<span class="fc" id="L382">				float y = Float.parseFloat(v.substring(s0 + 1, s1));</span>
<span class="fc" id="L383">				float width = Float.parseFloat(v.substring(s1 + 1, s2));</span>
<span class="fc" id="L384">				float height = Float.parseFloat(v.substring(s2 + 1, v.length() - 1));</span>
<span class="fc" id="L385">				return this.set(x, y, width, height);</span>
<span class="nc" id="L386">			} catch (NumberFormatException ex) {</span>
				// Throw a GdxRuntimeException
			}
		}
<span class="nc" id="L390">		throw new GdxRuntimeException(&quot;Malformed Rectangle: &quot; + v);</span>
	}

	public float area () {
<span class="nc" id="L394">		return this.width * this.height;</span>
	}

	public float perimeter () {
<span class="nc" id="L398">		return 2 * (this.width + this.height);</span>
	}

	public int hashCode () {
<span class="nc" id="L402">		final int prime = 31;</span>
<span class="nc" id="L403">		int result = 1;</span>
<span class="nc" id="L404">		result = prime * result + NumberUtils.floatToRawIntBits(height);</span>
<span class="nc" id="L405">		result = prime * result + NumberUtils.floatToRawIntBits(width);</span>
<span class="nc" id="L406">		result = prime * result + NumberUtils.floatToRawIntBits(x);</span>
<span class="nc" id="L407">		result = prime * result + NumberUtils.floatToRawIntBits(y);</span>
<span class="nc" id="L408">		return result;</span>
	}

	public boolean equals (Object obj) {
<span class="pc bpc" id="L412" title="1 of 2 branches missed.">		if (this == obj) return true;</span>
<span class="pc bpc" id="L413" title="1 of 2 branches missed.">		if (obj == null) return false;</span>
<span class="pc bpc" id="L414" title="1 of 2 branches missed.">		if (getClass() != obj.getClass()) return false;</span>
<span class="fc" id="L415">		Rectangle other = (Rectangle)obj;</span>
<span class="pc bpc" id="L416" title="1 of 2 branches missed.">		if (NumberUtils.floatToRawIntBits(height) != NumberUtils.floatToRawIntBits(other.height)) return false;</span>
<span class="pc bpc" id="L417" title="1 of 2 branches missed.">		if (NumberUtils.floatToRawIntBits(width) != NumberUtils.floatToRawIntBits(other.width)) return false;</span>
<span class="pc bpc" id="L418" title="1 of 2 branches missed.">		if (NumberUtils.floatToRawIntBits(x) != NumberUtils.floatToRawIntBits(other.x)) return false;</span>
<span class="pc bpc" id="L419" title="1 of 2 branches missed.">		if (NumberUtils.floatToRawIntBits(y) != NumberUtils.floatToRawIntBits(other.y)) return false;</span>
<span class="fc" id="L420">		return true;</span>
	}

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.5.5.201112152213</span></div></body></html>